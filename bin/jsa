#!/usr/bin/node

const readline = require("readline");

const rl = readline.createInterface({
  input: process.stdin,
  output: process.stdout,
  terminal: false
});

const userFn = process.argv[2]
  ? Function("stdin_QtZSMvEPLu", `return stdin_QtZSMvEPLu.${process.argv[2]}`)
  : x => x;
const userReducer = Function("a", "b", `return ${process.argv[3]}`);

let result = process.argv[4] ? JSON.parse(process.argv[4]) : "";
rl.on("line", stdin => {
  const res = userFn(stdin);
  result = userReducer(result, res);
});
rl.on("close", () => {
  console.log(result);
});
